{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchPhotos(userQuery, page, perPage) {\n  const params = new URLSearchParams({\n    page: page,\n    per_page: perPage,\n  });\n  const apiKey = '42993354-9366f462d179fd9692b03d8e1';\n  const query = userQuery;\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n  );\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderPhotos(data, gallery, options) {\n  const markup = data.hits\n    .map(data => {\n      return `<li class=\"gallery-item\"><a href=\"${data.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n            <p><b>Likes: </b>${data.likes}</p>\n            <p><b>Views: </b>${data.views}</p>\n            <p><b>Comments: </b>${data.comments}</p>\n            <p><b>Downloads: </b>${data.downloads}</p>\n            </li>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  new SimpleLightbox('.gallery a', options);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\nconst fetchPicturesForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst userInput = document.querySelector('input');\nconst containerDiv = document.querySelector('.container');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nlet page = 1;\nlet per_page = 15;\nlet userQuery;\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  containerDiv.append(loader);\n};\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\nconst showLoadMoreButton = () => {\n  loadMoreBtn.style.display = 'block';\n};\n\nconst hideLoadMoreButton = () => {\n  loadMoreBtn.style.display = 'none';\n};\n\nfunction shouldHideLoadMoreButton(loadedImagesCount, totalImagesCount) {\n  return loadedImagesCount >= totalImagesCount;\n}\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nfetchPicturesForm.addEventListener('submit', async e => {\n  showLoader();\n  page = 1;\n  e.preventDefault();\n  gallery.innerHTML = '';\n  userQuery = userInput.value;\n\n  try {\n    const photos = await fetchPhotos(userQuery, page, per_page);\n    renderPhotos(photos, gallery, options);\n\n    lightbox.refresh();\n\n    fetchPicturesForm.reset();\n    hideLoader();\n    showLoadMoreButton();\n\n    if (photos.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        backgroundColor: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      const galleryElement = document.querySelector('.gallery');\n      if (galleryElement && galleryElement.firstElementChild) {\n        const { height: cardHeight } =\n          galleryElement.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    }\n\n    if (shouldHideLoadMoreButton(gallery.children.length, photos.totalHits)) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoadMoreButton();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n  try {\n    page += 1;\n    const photos = await fetchPhotos(userQuery, page, per_page);\n    renderPhotos(photos, gallery);\n\n    lightbox.refresh();\n\n    hideLoader();\n\n    const galleryElement = document.querySelector('.gallery');\n    if (galleryElement && galleryElement.firstElementChild) {\n      const { height: cardHeight } =\n        galleryElement.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (gallery.children.length >= photos.totalHits) {\n      iziToast.warning({\n        title: '',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n    hideLoadMoreButton();\n  }\n});\n"],"names":["fetchPhotos","userQuery","page","perPage","apiKey","query","axios","renderPhotos","data","gallery","options","markup","SimpleLightbox","fetchPicturesForm","userInput","containerDiv","loadMoreBtn","per_page","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","shouldHideLoadMoreButton","loadedImagesCount","totalImagesCount","lightbox","e","photos","iziToast","galleryElement","cardHeight","error"],"mappings":"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"}